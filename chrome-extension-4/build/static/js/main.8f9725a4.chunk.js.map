{"version":3,"sources":["App.tsx","index.tsx"],"names":["getUid","userName","a","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","githubId","response","json","data","message","uuid_github","getRating","uid","App","link","useState","appClose","showResult","setShowResult","rating","credits","result","setResult","error","setError","loading","setLoading","className","id","style","textAlign","marginBottom","fontSize","toFixed","onClick","url","Promise","res","rej","match","split","console","log","then","average","remaining_credits","catch","err","window","onload","allLinks","document","querySelectorAll","forEach","href","app","createElement","getBoundingClientRect","x","y","width","height","position","top","left","transform","ReactDOM","render","remove","onmouseenter","appendChild"],"mappings":"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","file":"static/js/main.8f9725a4.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\n//This is for the first api which will use the \"POST\" method.\n//POST simply means mosting data to an api and you will get result\nconst getUid = async (userName: string) => {\n   //The first argument is the api link which we will call the method.\n   const response = await fetch(\n      \"https://ratings-api.dev.reputationaire.com/api/request-rating\",\n      {\n         method: \"POST\", // *GET, POST, PUT, DELETE, etc.\n         mode: \"cors\", // no-cors, *cors, same-origin\n         cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n         credentials: \"same-origin\", // include, *same-origin, omit\n         headers: {\n            \"Content-Type\": \"application/json\",\n            // 'Content-Type': 'application/x-www-form-urlencoded',\n         },\n         redirect: \"follow\", // manual, *follow, error\n         referrerPolicy: \"no-referrer\", // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n         body: JSON.stringify({ githubId: userName }), // body data type must match \"Content-Type\" header\n      }\n   );\n\n   const data = await response.json();\n   return data.message.uuid_github;\n};\n\n//The is second api call. which will be get request.\n//In get and post main difference is that in 'get' reqest there is only single url and no data while in post there is some additional data like we sent above.\nconst getRating = async (uid: string) => {\n   //Gets the response from the get request\n   const response = await fetch(\n      `https://ratings-api.dev.reputationaire.com/api/result?id=${uid}&access=f62345e8-9378-425b-b122-ecb4a9610a38`\n   );\n   //Convert it to json\n   const data = await response.json();\n   //Then return it from the function\n   return data;\n};\nexport const isValidUrl = (url: string) => {\n   return url && url.match(/github.com\\/.+/);\n};\n\n//This code will get the userName from the link.\n//NOTE: When we will call res it will meant that the promise is fullfilled without any error.\n//NOTE: When we will call rej it will mean that our work is failed and we pass an error to reject method.\nconst getUserName = (url: string) => {\n   return new Promise((res, rej) => {\n      //We check if the url exists.\n      if (url) {\n         //Then we check if the url have \"github.com\" at its start.\n         if (url.match(/github.com\\/.+/)) {\n            //We extract the username from the whole url\n            const userName = url.split(\"github.com/\")[1].split(\"/\")[0];\n\n            console.log(userName);\n            //The pass the value of userName to res\n            res(userName);\n         } else {\n            //If url doesn't contain github.com we send an error.\n            rej(\"The url doesn't contain name of any github user\");\n         }\n      } else {\n         //If url is invalid we fail the promise with same error.\n         rej(\"The url doesn't contain name of any github user\");\n      }\n   });\n};\n\nconst App: React.FC<{ link: string }> = ({ link }) => {\n   //Creating  the basic state variables.\n   const [appClose, setAppClose] = useState(false);\n   //Show result is a boolean which will determine whether we will show the result(rating percentage) or not.\n   const [showResult, setShowResult] = useState(false);\n\n   //result is a state variable which will contain the data which will get afte calling all the apis\n   const [result, setResult] = useState({\n      rating: 0,\n      userName: \"\",\n      credits: 1000,\n   });\n\n   //Error is varible which will check if there is some error. If there is no error it will be empty string\n   const [error, setError] = useState(\"\");\n\n   //loading is a boolean which will determine whether the app is loading or not. If it will be true \"Crunching 50 million developers...\" will show.\n   const [loading, setLoading] = useState(false);\n\n   //This is a function which will be called when we will click the main button of find Ranking.\n   const onButtonClick = () => {\n      //Whenver the button is clicked we set loading to true so the \"Crunching 50 million developers...\" will show.\n      setLoading(true);\n\n      //Now we call the getUserName function\n      //NOTE: The callback defined inside then is when the promise is fulfilled. (means \"res\" is called and we get a user name successfully)\n      //NOTE: The callback inside catch is called when promise is rejected means it has some kind of error.(means rej will be called and)\n\n      getUserName(link)\n         .then((userName: any) => {\n            //We are inside then which means we get the userName from url successfuly.\n            //Now we need to get the uid and then get the rating\n\n            //Ok now we call the getUid function\n            getUid(userName).then((uid) => {\n               //Now we are inside then of `getUid` so it means that we get the uid successfully.\n\n               //Now we use that uid to get the rating(The last api)\n\n               getRating(uid).then((data) => {\n                  //We are inside then which means we getRating is called successfully\n                  //'data' is the final variable which will contain the average and remaining credits\n                  if (data.error === true) {\n                     setError(\"Unable to get the rating of this user\");\n                     setLoading(false);\n                  } else {\n                     //We set that data as a result in out state variable\n                     setResult({\n                        rating: data.message.average * 100,\n                        userName: userName,\n                        credits: data.message.remaining_credits,\n                     });\n\n                     //We set show result to true so now our result will be shown too.\n                     setShowResult(true);\n\n                     //It will remove any previous errors.\n                     setError(\"\");\n\n                     //End the loading because all the apis are called and we get the result\n                     setLoading(false);\n                  }\n               });\n            });\n         })\n         .catch((err) => {\n            console.log(err);\n            setError(err);\n            setLoading(false);\n         });\n   };\n   if (appClose) {\n      return null;\n   }\n\n   //We check if the loading is true then we return the \"Crunching 50 million developers...\" text only\n   if (loading === true) {\n      return (\n         <div className=\"App\">\n            {/* <div onClick={() => setAppClose(true)} className=\"close-btn\"></div> */}\n            <div id=\"loading-text\" className=\"text\">\n               Crunching 50 million developers...\n            </div>\n         </div>\n      );\n   }\n\n   //We check if the credits are less than 0 or equal to zero we return \"You have no credits left.\" text with a button \"Buy more credits\".\n   if (result.credits <= 0) {\n      return (\n         <div className=\"App\">\n            {/* <div onClick={() => setAppClose(true)} className=\"close-btn\"></div> */}\n            <div className=\"text\">You have no credits left.</div>\n            <button className=\"btn\">Buy more credits</button>\n         </div>\n      );\n   }\n\n   //If none of the above conditions are true we return out main app.\n   return (\n      <div className=\"App\">\n         {/* <div onClick={() => setAppClose(true)} className=\"close-btn\"></div> */}\n         {/* If error contains any value we show that error */}\n         {error ? (\n            <div className=\"text\" id=\"error\">\n               {error}\n            </div>\n         ) : (\n            <></>\n         )}\n         {/* If showResult is true we show our result */}\n         {showResult ? (\n            <div style={{ textAlign: \"center\", marginBottom: \"25px\" }}>\n               <div style={{ marginBottom: \"20px\", fontSize: \"22px\" }}>\n                  Rating of <b>{result.userName}</b> is\n               </div>\n               <div id=\"percentage\">{result.rating.toFixed(4)}%</div>\n            </div>\n         ) : (\n            \"\"\n         )}\n         {/* Render the main button of which will find ranking. We set its onClick to \"onButtonClick\" function which is created above */}\n         <button onClick={onButtonClick} className=\"btn\">\n            Find Ranking\n         </button>\n      </div>\n   );\n};\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App, { isValidUrl } from \"./App\";\r\nimport \"./index.css\";\r\nconsole.log(\"Hello from content script\");\r\nconst pointInRect = (\r\n   { x1, y1, x2, y2 }: { x1: number; x2: number; y1: number; y2: number },\r\n   { x, y }: { x: number; y: number }\r\n) => x > x1 && x < x2 && y > y1 && y < y2;\r\nwindow.onload = function () {\r\n   const allLinks = document.querySelectorAll(\"a\");\r\n   console.log(allLinks);\r\n   allLinks.forEach((a) => {\r\n      if (isValidUrl(a.href)) {\r\n         const app = document.createElement(\"div\");\r\n\r\n         const { x, y, width, height } = a.getBoundingClientRect();\r\n         app.className = \"my-extension-root\";\r\n         app.style.position = \"absolute\";\r\n         app.style.top = y + \"px\";\r\n         app.style.left = x + \"px\";\r\n         app.style.transform = \"translate(0, -100%)\";\r\n\r\n         ReactDOM.render(\r\n            <>\r\n               <App link={a.href} />\r\n               <div className=\"close-btn\" onClick={() => app.remove()}>\r\n                  X\r\n               </div>\r\n            </>,\r\n            app\r\n         );\r\n\r\n         a.onmouseenter = function () {\r\n            document.querySelectorAll(\".my-extension-root\").forEach((x) => {\r\n               if (x !== app) {\r\n                  x.remove();\r\n               }\r\n            });\r\n            document.body.appendChild(app);\r\n         };\r\n      }\r\n   });\r\n};\r\n"],"sourceRoot":""}